var ce=Object.defineProperty;var U=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var G=(t,n,s)=>n in t?ce(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,Q=(t,n)=>{for(var s in n||(n={}))X.call(n,s)&&G(t,s,n[s]);if(U)for(var s of U(n))Y.call(n,s)&&G(t,s,n[s]);return t};var K=(t,n)=>{var s={};for(var r in t)X.call(t,r)&&n.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&U)for(var r of U(t))n.indexOf(r)<0&&Y.call(t,r)&&(s[r]=t[r]);return s};import{S as fe,i as ue,s as he,e as x,c as $,a as ee,d as P,b as M,f as v,M as ge,aw as ye,am as be,D as te,aL as me,a7 as pe,t as we,g as Ce,h as Ne,aY as _e,k as ne,aZ as Te}from"./vendor-7daaf109.js";const Le=typeof window!="undefined"?window:void 0;function se(t,n,s={}){const r=Object.assign({tab:"	",indentOn:/{$/,spellcheck:!1,catchTab:!0,preserveIdent:!0,addClosing:!0,history:!0,window:Le},s),l=r.window,u=l.document;let C=[],y=[],f=-1,L=!1,N,p;t.setAttribute("contenteditable","plaintext-only"),t.setAttribute("spellcheck",r.spellcheck?"true":"false"),t.style.outline="none",t.style.overflowWrap="break-word",t.style.overflowY="auto",t.style.whiteSpace="pre-wrap";let o=!1;n(t),t.contentEditable!=="plaintext-only"&&(o=!0),o&&t.setAttribute("contenteditable","true");const h=W(()=>{const e=k();n(t,e),T(e)},30);let m=!1;const E=e=>!z(e)&&!V(e)&&e.key!=="Meta"&&e.key!=="Control"&&e.key!=="Alt"&&!e.key.startsWith("Arrow"),S=W(e=>{E(e)&&(j(),m=!1)},300),O=(e,i)=>{C.push([e,i]),t.addEventListener(e,i)};O("keydown",e=>{e.defaultPrevented||(p=A(),r.preserveIdent?ie(e):F(e),r.catchTab&&ae(e),r.addClosing&&le(e),r.history&&(re(e),E(e)&&!m&&(j(),m=!0)),o&&T(k()))}),O("keyup",e=>{e.defaultPrevented||e.isComposing||(p!==A()&&h(),S(e),N&&N(A()))}),O("focus",e=>{L=!0}),O("blur",e=>{L=!1}),O("paste",e=>{j(),oe(e),j(),N&&N(A())});function k(){const e=I(),i={start:0,end:0,dir:void 0};let{anchorNode:a,anchorOffset:c,focusNode:g,focusOffset:w}=e;if(!a||!g)throw"error1";if(a.nodeType===Node.ELEMENT_NODE){const b=u.createTextNode("");a.insertBefore(b,a.childNodes[c]),a=b,c=0}if(g.nodeType===Node.ELEMENT_NODE){const b=u.createTextNode("");g.insertBefore(b,g.childNodes[w]),g=b,w=0}return J(t,b=>{if(b===a&&b===g)return i.start+=c,i.end+=w,i.dir=c<=w?"->":"<-","stop";if(b===a)if(i.start+=c,!i.dir)i.dir="->";else return"stop";else if(b===g)if(i.end+=w,!i.dir)i.dir="<-";else return"stop";b.nodeType===Node.TEXT_NODE&&(i.dir!="->"&&(i.start+=b.nodeValue.length),i.dir!="<-"&&(i.end+=b.nodeValue.length))}),t.normalize(),i}function T(e){const i=I();let a,c=0,g,w=0;if(e.dir||(e.dir="->"),e.start<0&&(e.start=0),e.end<0&&(e.end=0),e.dir=="<-"){const{start:_,end:D}=e;e.start=D,e.end=_}let b=0;J(t,_=>{if(_.nodeType!==Node.TEXT_NODE)return;const D=(_.nodeValue||"").length;if(b+D>e.start&&(a||(a=_,c=e.start-b),b+D>e.end))return g=_,w=e.end-b,"stop";b+=D}),a||(a=t,c=t.childNodes.length),g||(g=t,w=t.childNodes.length),e.dir=="<-"&&([a,c,g,w]=[g,w,a,c]),i.setBaseAndExtent(a,c,g,w)}function d(){const i=I().getRangeAt(0),a=u.createRange();return a.selectNodeContents(t),a.setEnd(i.startContainer,i.startOffset),a.toString()}function B(){const i=I().getRangeAt(0),a=u.createRange();return a.selectNodeContents(t),a.setStart(i.endContainer,i.endOffset),a.toString()}function ie(e){if(e.key==="Enter"){const i=d(),a=B();let[c]=Z(i),g=c;if(r.indentOn.test(i)&&(g+=r.tab),g.length>0?(R(e),e.stopPropagation(),H(`
`+g)):F(e),g!==c&&a[0]==="}"){const w=k();H(`
`+c),T(w)}}}function F(e){if(o&&e.key==="Enter")if(R(e),e.stopPropagation(),B()==""){H(`
 `);const i=k();i.start=--i.end,T(i)}else H(`
`)}function le(e){const i=`([{'"`,a=`)]}'"`,c=B(),g=d(),w=g.substr(g.length-1)==="\\",b=c.substr(0,1);if(a.includes(e.key)&&!w&&b===e.key){const _=k();R(e),_.start=++_.end,T(_)}else if(i.includes(e.key)&&!w&&(`"'`.includes(e.key)||[""," ",`
`].includes(b))){R(e);const _=k(),D=_.start==_.end?"":I().toString(),de=e.key+D+a[i.indexOf(e.key)];H(de),_.start++,_.end++,T(_)}}function ae(e){if(e.key==="Tab")if(R(e),e.shiftKey){const i=d();let[a,c]=Z(i);if(a.length>0){const g=k(),w=Math.min(r.tab.length,a.length);T({start:c,end:c+w}),u.execCommand("delete"),g.start-=w,g.end-=w,T(g)}}else H(r.tab)}function re(e){if(z(e)){R(e),f--;const i=y[f];i&&(t.innerHTML=i.html,T(i.pos)),f<0&&(f=0)}if(V(e)){R(e),f++;const i=y[f];i&&(t.innerHTML=i.html,T(i.pos)),f>=y.length&&f--}}function j(){if(!L)return;const e=t.innerHTML,i=k(),a=y[f];if(a&&a.html===e&&a.pos.start===i.start&&a.pos.end===i.end)return;f++,y[f]={html:e,pos:i},y.splice(f+1);const c=300;f>c&&(f=c,y.splice(0,1))}function oe(e){R(e);const i=(e.originalEvent||e).clipboardData.getData("text/plain").replace(/\r/g,""),a=k();H(i),n(t),T({start:a.start+i.length,end:a.start+i.length})}function J(e,i){const a=[];e.firstChild&&a.push(e.firstChild);let c=a.pop();for(;c&&i(c)!=="stop";)c.nextSibling&&a.push(c.nextSibling),c.firstChild&&a.push(c.firstChild),c=a.pop()}function q(e){return e.metaKey||e.ctrlKey}function z(e){return q(e)&&!e.shiftKey&&e.code==="KeyZ"}function V(e){return q(e)&&e.shiftKey&&e.code==="KeyZ"}function H(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),u.execCommand("insertHTML",!1,e)}function W(e,i){let a=0;return(...c)=>{clearTimeout(a),a=l.setTimeout(()=>e(...c),i)}}function Z(e){let i=e.length-1;for(;i>=0&&e[i]!==`
`;)i--;i++;let a=i;for(;a<e.length&&/[ \t]/.test(e[a]);)a++;return[e.substring(i,a)||"",i,a]}function A(){return t.textContent||""}function R(e){e.preventDefault()}function I(){var e;return((e=t.parentNode)===null||e===void 0?void 0:e.nodeType)==Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.getSelection():l.getSelection()}return{updateOptions(e){Object.assign(r,e)},updateCode(e){t.textContent=e,n(t)},onUpdate(e){N=e},toString:A,save:k,restore:T,recordHistory:j,destroy(){for(let[e,i]of C)t.removeEventListener(e,i)}}}function ke(t,n={}){const s=Object.assign({class:"codejar-linenumbers",wrapClass:"codejar-wrap",width:"35px",backgroundColor:"rgba(128, 128, 128, 0.15)",color:""},n);let r;return function(l){t(l),r||(r=Ee(l,s),l.addEventListener("scroll",()=>r.style.top=`-${l.scrollTop}px`));const C=(l.textContent||"").replace(/\n+$/,`
`).split(`
`).length+1;let y="";for(let f=1;f<C;f++)y+=`${f}
`;r.innerText=y}}function Ee(t,n){const s=getComputedStyle(t),r=document.createElement("div");r.className=n.wrapClass,r.style.position="relative";const l=document.createElement("div");l.className=n.class,r.appendChild(l),l.style.position="absolute",l.style.top="0px",l.style.left="0px",l.style.bottom="0px",l.style.width=n.width,l.style.overflow="hidden",l.style.backgroundColor=n.backgroundColor,l.style.color=n.color||s.color,l.style.setProperty("mix-blend-mode","difference"),l.style.fontFamily=s.fontFamily,l.style.fontSize=s.fontSize,l.style.lineHeight=s.lineHeight,l.style.paddingTop=s.paddingTop,l.style.paddingLeft=s.paddingLeft,l.style.borderTopLeftRadius=s.borderTopLeftRadius,l.style.borderBottomLeftRadius=s.borderBottomLeftRadius;const u=document.createElement("div");return u.style.position="relative",u.style.top="0px",l.appendChild(u),t.style.paddingLeft=`calc(${n.width} + ${l.style.paddingLeft})`,t.style.whiteSpace="pre",t.parentNode.insertBefore(r,t),r.appendChild(t),u}function Oe(t,n){let o=n,{highlight:s,onUpdate:r,syntax:l,value:u,withLineNumbers:C=!1}=o,y=K(o,["highlight","onUpdate","syntax","value","withLineNumbers"]),f=se(t,p(s),y);function L(){f.destroy();const h=t.parentElement;if(h&&h.classList.contains("codejar-wrap")){const m=h.parentElement;t.style.padding="",m.appendChild(t),h.remove()}}function N(h){r&&r(f.toString())}function p(h){const m=h?E=>{var S;E.innerHTML=h((S=E.textContent)!==null&&S!==void 0?S:"",l)}:E=>{};return C?ke(m):m}return t.addEventListener("input",N),{destroy(){L(),t.removeEventListener("input",N)},update(h){var m;m=h,{highlight:s,onUpdate:r,syntax:l,value:u,withLineNumbers:C=!1}=m,y=K(m,["highlight","onUpdate","syntax","value","withLineNumbers"]),n.highlight!==s||n.withLineNumbers!==C?(L(),f=se(t,p(s),n)):f.updateOptions(y),u!==f.toString()&&f.updateCode(u),n=Q({highlight:s,value:u,withLineNumbers:C},y)}}}function Se(t){let n;return{c(){n=we(t[1])},l(s){n=Ce(s,t[1])},m(s,r){v(s,n,r)},p(s,r){r&2&&Ne(n,s[1])},d(s){s&&P(n)}}}function Re(t){let n,s=t[12](t[1],t[13])+"",r;return{c(){n=new _e,r=ne(),this.h()},l(l){n=Te(l),r=ne(),this.h()},h(){n.a=r},m(l,u){n.m(s,l,u),v(l,r,u)},p(l,u){u&12290&&s!==(s=l[12](l[1],l[13])+"")&&n.p(s)},d(l){l&&P(r),l&&n.d()}}}function He(t){let n,s,r,l,u,C,y,f;function L(o,h){return o[12]?Re:Se}let N=L(t),p=N(t);return{c(){n=x("pre"),s=x("code"),p.c(),this.h()},l(o){n=$(o,"PRE",{class:!0,style:!0});var h=ee(n);s=$(h,"CODE",{class:!0});var m=ee(s);p.l(m),m.forEach(P),h.forEach(P),this.h()},h(){var o;M(s,"class",r=t[13]?`language-${t[13]}`:""),M(n,"class",l=""+((t[13]?`language-${t[13]}`:"")+" "+((o=t[2])!=null?o:""))),M(n,"style",u=t[3]?t[3]:"")},m(o,h){v(o,n,h),ge(n,s),p.m(s,null),t[15](n),y||(f=ye(C=Oe.call(null,n,{addClosing:t[4],catchTab:t[5],highlight:t[12],history:t[6],indentOn:t[7],onUpdate:t[14],preserveIdent:t[8],spellcheck:t[9],syntax:t[13],tab:t[10],value:t[1],withLineNumbers:t[11]})),y=!0)},p(o,[h]){var m;N===(N=L(o))&&p?p.p(o,h):(p.d(1),p=N(o),p&&(p.c(),p.m(s,null))),h&8192&&r!==(r=o[13]?`language-${o[13]}`:"")&&M(s,"class",r),h&8196&&l!==(l=""+((o[13]?`language-${o[13]}`:"")+" "+((m=o[2])!=null?m:"")))&&M(n,"class",l),h&8&&u!==(u=o[3]?o[3]:"")&&M(n,"style",u),C&&be(C.update)&&h&16370&&C.update.call(null,{addClosing:o[4],catchTab:o[5],highlight:o[12],history:o[6],indentOn:o[7],onUpdate:o[14],preserveIdent:o[8],spellcheck:o[9],syntax:o[13],tab:o[10],value:o[1],withLineNumbers:o[11]})},i:te,o:te,d(o){o&&P(n),p.d(),t[15](null),y=!1,f()}}}function De(t,n,s){const r=me();let{element:l=void 0}=n,{class:u=void 0}=n,{style:C=void 0}=n,{addClosing:y=!0}=n,{catchTab:f=!0}=n,{history:L=!0}=n,{indentOn:N=/{$/}=n,{preserveIdent:p=!0}=n,{spellcheck:o=!1}=n,{tab:h="	"}=n,{withLineNumbers:m=void 0}=n,{highlight:E=void 0}=n,{syntax:S=void 0}=n,{value:O=""}=n;function k(d){s(1,O=d),r("change",{value:d})}function T(d){pe[d?"unshift":"push"](()=>{l=d,s(0,l)})}return t.$$set=d=>{"element"in d&&s(0,l=d.element),"class"in d&&s(2,u=d.class),"style"in d&&s(3,C=d.style),"addClosing"in d&&s(4,y=d.addClosing),"catchTab"in d&&s(5,f=d.catchTab),"history"in d&&s(6,L=d.history),"indentOn"in d&&s(7,N=d.indentOn),"preserveIdent"in d&&s(8,p=d.preserveIdent),"spellcheck"in d&&s(9,o=d.spellcheck),"tab"in d&&s(10,h=d.tab),"withLineNumbers"in d&&s(11,m=d.withLineNumbers),"highlight"in d&&s(12,E=d.highlight),"syntax"in d&&s(13,S=d.syntax),"value"in d&&s(1,O=d.value)},[l,O,u,C,y,f,L,N,p,o,h,m,E,S,k,T]}class Me extends fe{constructor(n){super();ue(this,n,De,He,he,{element:0,class:2,style:3,addClosing:4,catchTab:5,history:6,indentOn:7,preserveIdent:8,spellcheck:9,tab:10,withLineNumbers:11,highlight:12,syntax:13,value:1})}}var Ie=Me;export{Ie as CodeJar};
